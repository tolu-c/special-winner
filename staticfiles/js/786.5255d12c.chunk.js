(self.webpackChunkfiles=self.webpackChunkfiles||[]).push([[786,664],{2590:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var l=s(184),n=function(e){var t=e.title,s=e.type,n=e.onClick;return(0,l.jsx)("button",{type:s,onClick:n,className:"text-base font-semibold text-white bg-slate-800 hover:bg-slate-950 p-2 px-4 rounded-lg w-full",children:t})}},9804:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var l=s(7689),n=s(4165),a=s(5861),r=s(9439),o=s(4234),c=s(1087),i=s(184),u=function(e){var t=e.id,s=e.file,l=s.substring(s.lastIndexOf("/")+1);return(0,i.jsxs)("div",{className:"flex flex-col w-full rounded-lg hover:shadow-sm hover:border overflow-hidden",children:[(0,i.jsx)("img",{src:"http://localhost:8000/".concat(s),alt:"".concat(t),className:"w-full h-auto object-top object-contain"}),(0,i.jsxs)("div",{className:"w-full p-2 flex justify-between items-center",children:[(0,i.jsx)("h4",{className:"text-lg md:text-base font-medium truncate",children:l}),(0,i.jsx)(c.rU,{to:"/files/".concat(t),className:"text-sm text-slate-700 hover:text-slate-800 hover:underline w-max",children:"View"})]})]})},d=s(6796),x=function(){var e=(0,l.s0)();return(0,i.jsx)("span",{className:"absolute bottom-8 right-8 w-12 md:w-16 h-12 md:h-16 rounded-full flex items-center justify-center bg-slate-800 hover:bg-slate-950 text-slate-100 z-40 cursor-pointer",onClick:function(){return e("upload")},children:(0,i.jsx)(d.Z,{className:"w-6 md:w-8 h-6 md:h-8"})})},f=s(2791),h=function(){var e=(0,f.useState)([]),t=(0,r.Z)(e,2),s=t[0],l=t[1],d=(0,f.useContext)(o.V).authToken;(0,f.useEffect)((function(){h()}),[]);var h=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:8000/api-v2","/files/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.access)}});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,l(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 lg:gap-8 p-4",children:[s&&0!==s.length?s.map((function(e){return(0,i.jsx)(u,{file:e.file,id:e.id,user:e.user},e.id)})):(0,i.jsxs)("div",{className:"w-full flex flex-col gap-2 justify-start",children:[(0,i.jsx)("h4",{className:"text-lg text-slate-800 font-medium",children:"No files yet"}),(0,i.jsx)(c.rU,{to:"/upload",className:"text-base text-slate-600 hover:text-slate-800 hover:font-semibold",children:"Upload?"})]}),(0,i.jsx)(x,{})]})},m=function(){return(0,i.jsx)(h,{})},p=s(6226),j=function(e){var t=e.fileID,s=(0,f.useState)([]),l=(0,r.Z)(s,2),c=l[0],u=l[1],d=(0,f.useContext)(o.V).authToken,x=c.find((function(e){return e.id===t}));(0,f.useEffect)((function(){h()}),[]);var h=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:8000/api-v2","/files/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.access)}});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,u(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"p-4",children:[function(){if(x){var e,t=null===(e=x.file.split(".").pop())||void 0===e?void 0:e.toLowerCase();if("pdf"===t)return(0,i.jsx)(p.BB,{file:"http://localhost:8000".concat(x.file)});if("txt"===t)return(0,i.jsx)("iframe",{src:"http://localhost:8000".concat(x.file),title:"File Preview",width:"100%",height:"500px"});if("jpg"===t||"jpeg"===t||"png"===t)return(0,i.jsx)("img",{src:"http://localhost:8000".concat(x.file),alt:x.user,className:"w-auto h-auto max-h-64 object-contain object-center"})}return null}(),(0,i.jsx)("a",{href:"http://localhost:8000".concat(null===x||void 0===x?void 0:x.file),download:!0,target:"_blank",rel:"noreferrer",className:"underline text-base font-medium hover:font-bold text-slate-700 hover:text-slate-800",children:"Download"})]})},v=function(){var e=(0,l.UO)().id;return(0,i.jsx)(j,{fileID:parseInt(e)})},g=s(2590),w=function(){var e=(0,f.useState)(null),t=(0,r.Z)(e,2),s=t[0],c=t[1],u=(0,f.useContext)(o.V),d=u.authToken,x=u.user,h=(0,l.s0)(),m=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:8000/api-v2","/upload-file/"),{method:"POST",headers:{Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.access)},body:t});case 2:return s=e.sent,e.next=5,s.json();case 5:l=e.sent,s.ok?(console.log("uploaded"),h("/files/".concat(l.id))):console.log("Error:",l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"p-4 flex flex-col gap-4 justify-start font-inter",children:[(0,i.jsx)("h2",{className:"text-lg font-bold text-slate-950",children:"Add Files"}),(0,i.jsxs)("form",{className:"w-full flex flex-col justify-start gap-3",onSubmit:function(e){if(e.preventDefault(),s){var t=new FormData;t.append("file",s),t.append("user",x.user_id),m(t)}},encType:"multipart/form-data",children:[(0,i.jsxs)("div",{className:"w-5/6 md:w-3/4 mx-auto",children:[(0,i.jsx)("label",{htmlFor:"upload",className:"w-full h-48 border border-dashed p-4 flex justify-center items-center rounded-md",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,i.jsx)("p",{className:"text-base text-slate-800 font-medium cursor-pointer",children:"Upload a file"}),(0,i.jsx)("p",{className:"text-sm text-slate-400 font-light",children:"PNG, JPG, PDF up to 3MB"})]})}),(0,i.jsx)("input",{type:"file",id:"upload",name:"file",className:"hidden",onChange:function(e){var t,s=null===(t=e.target.files)||void 0===t?void 0:t[0];c(s||null)}})]}),(0,i.jsx)("div",{className:"w-1/2 md:w-1/4",children:(0,i.jsx)(g.z,{type:"submit",title:"Upload File"})})]})]})},N=function(){return(0,i.jsx)(w,{})},b=s(6225),y=s(5902),Z=s(4591),k=s(7893),C=s(9134),F=function(){var e=(0,f.useContext)(o.V),t=e.user,s=e.logout;return(0,i.jsxs)("div",{className:"hidden md:flex md:col-span-2 lg:col-span-1 bg-gray-900 h-full flex-col py-4 px-2 gap-12",children:[(0,i.jsx)("h2",{className:"text-gray-100 text-xl font-bold",children:"Leke Files"}),(0,i.jsxs)("ul",{className:"w-full flex flex-col gap-4",children:[(0,i.jsx)(A,{title:"Home",href:"/home",icon:(0,i.jsx)(y.Z,{className:"w-6 h-6"})}),(0,i.jsx)(A,{title:"Files",href:"",icon:(0,i.jsx)(Z.Z,{className:"w-6 h-6"})}),(0,i.jsx)(A,{title:"Upload",href:"upload",icon:(0,i.jsx)(k.Z,{className:"w-6 h-6"})})]}),(0,i.jsx)("div",{className:"order-last",children:t?(0,i.jsxs)("button",{type:"button",onClick:s,className:"text-slate-400 w-full p-3 flex gap-3 items-center rounded-lg hover:bg-gray-800 hover:shadow font-medium hover:text-slate-100",children:[(0,i.jsx)(C.Z,{className:"w-6 h-6"}),(0,i.jsx)("span",{children:"Logout"})]}):(0,i.jsx)(A,{title:"Login",href:"login",icon:(0,i.jsx)(C.Z,{className:"w-6 h-6"})})})]})},A=function(e){var t=e.title,s=e.href,l=e.icon;return(0,i.jsxs)(c.OL,{to:s,className:function(e){var t=e.isActive;return"".concat(t?"text-slate-100 bg-gray-800 shadow-md":"text-slate-400"," w-full p-3 flex gap-3 items-center rounded-lg hover:bg-gray-800 hover:shadow font-medium hover:text-slate-100")},children:[(0,i.jsx)("span",{children:l}),(0,i.jsx)("span",{children:t})]})},T=s(4164),U=s(9283),z=function(e){var t=e.onClose,s=(0,i.jsxs)("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-600 flex",children:[(0,i.jsx)("span",{className:"cursor-pointer order-last w-max p-3 text-gray-300 bg-gray-700/70 rounded-full h-max absolute top-3 right-3",onClick:t,children:(0,i.jsx)(U.Z,{className:"w-6 h-6"})}),(0,i.jsxs)("div",{className:"w-3/4 bg-gray-900 h-full flex flex-col p-4 gap-12",children:[(0,i.jsx)("h2",{className:"text-gray-100 text-xl font-bold",children:"Leke Files"}),(0,i.jsxs)("ul",{className:"w-full flex flex-col gap-4",children:[(0,i.jsx)(A,{title:"Home",href:"/",icon:(0,i.jsx)(y.Z,{className:"w-6 h-6"})}),(0,i.jsx)(A,{title:"Files",href:"files",icon:(0,i.jsx)(Z.Z,{className:"w-6 h-6"})}),(0,i.jsx)(A,{title:"Upload",href:"upload",icon:(0,i.jsx)(k.Z,{className:"w-6 h-6"})})]}),(0,i.jsx)("div",{className:"order-last",children:(0,i.jsx)(A,{title:"Logout",href:"logout",icon:(0,i.jsx)(C.Z,{className:"w-6 h-6"})})})]})]});return(0,T.createPortal)(s,document.getElementById("sidebar"))},L=function(e){var t=e.children,s=(0,f.useState)(!1),n=(0,r.Z)(s,2),a=n[0],c=n[1],u=(0,f.useContext)(o.V).user,d=(0,l.TH)();return(0,i.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-8 lg:grid-cols-6 h-screen relative",children:[(0,i.jsx)(F,{}),(0,i.jsxs)("div",{className:"col-auto md:col-span-6 lg:col-span-5 flex flex-col h-full",children:[(0,i.jsxs)("div",{className:"w-full h-16 border-b border-slate-200 flex justify-between items-center p-3 px-6",children:[(0,i.jsx)("span",{className:"md:hidden text-slate-800 cursor-pointer",onClick:function(){c(!0)},children:(0,i.jsx)(b.Z,{className:"w-6 h-6"})}),(0,i.jsx)("h2",{className:"text-lg font-bold text-slate-950 capitalize",children:"/"===d.pathname?"Leke Files":d.pathname.split("/")[1]}),(0,i.jsxs)("p",{className:"text-sm font-medium text-slate-600",children:["Hello,"," ",(0,i.jsx)("span",{className:"text-slate-800 capitalize",children:u?u.username:"Anonymous"})]})]}),(0,i.jsx)("div",{className:"w-full p-3 h-full",children:t}),a&&(0,i.jsx)(z,{onClose:function(){c(!1)}})]})]})},B=s(5664),P=function(){return(0,i.jsx)(L,{children:(0,i.jsxs)(l.Z5,{children:[(0,i.jsx)(l.AW,{index:!0,element:(0,i.jsx)(m,{})}),(0,i.jsx)(l.AW,{path:":id",element:(0,i.jsx)(v,{})}),(0,i.jsx)(l.AW,{path:"upload",element:(0,i.jsx)(N,{})}),(0,i.jsx)(l.AW,{path:"*",element:(0,i.jsx)(B.default,{})})]})})}},5664:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var l=s(1087),n=s(184),a=function(){return(0,n.jsxs)("div",{className:"flex flex-col gap-3 p-4 justify-center items-center w-full h-full",children:[(0,n.jsx)("h5",{className:"text-base md:text-lg font-semibold text-slate-900",children:"404"}),(0,n.jsx)("h2",{className:"text-slate-950 font-bold text-3xl md:text-5xl",children:"Page not found"}),(0,n.jsx)("p",{className:"text-sm md:text-base font-normal text-slate-600 text-center",children:"Sorry, we couldn't find the page you were looking for."}),(0,n.jsx)(l.rU,{to:"/",className:"text-base font-medium text-slate-800 hover:text-slate-950 hover:font-bold",children:"Go back home"})]})},r=function(){return(0,n.jsx)(a,{})}},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}}]);
//# sourceMappingURL=786.5255d12c.chunk.js.map